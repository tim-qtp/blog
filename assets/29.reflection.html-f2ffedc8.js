import{_ as n,W as s,X as a,a2 as e}from"./framework-28eb7fba.js";const t={},p=e(`<p><strong>ğŸ“Œ åå°„ï¼ˆReflectionï¼‰</strong> å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶ åŠ¨æ€è·å–ç±»çš„ä¿¡æ¯ã€åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€ä¿®æ”¹å­—æ®µï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å†™æ­»ä»£ç ã€‚</p><h2 id="_1-ä¸ºä»€ä¹ˆè¦ç”¨åå°„" tabindex="-1"><a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆè¦ç”¨åå°„" aria-hidden="true">#</a> <strong>1. ä¸ºä»€ä¹ˆè¦ç”¨åå°„ï¼Ÿ</strong></h2><p>é€šå¸¸ï¼Œåœ¨ç¼–å†™ Java ä»£ç æ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯è¿™æ ·è°ƒç”¨ç±»çš„æ–¹æ³•çš„ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>javaå¤åˆ¶ç¼–è¾‘Person p = new Person();
p.sayHello();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>Person</code> ç±»çš„ <code>sayHello()</code> æ–¹æ³•æ˜¯<strong>åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šçš„</strong>ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ï¼š</p><ol><li><strong>åœ¨è¿è¡Œæ—¶</strong>æ‰å†³å®šè¦è°ƒç”¨å“ªä¸ªç±»çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ä»é…ç½®æ–‡ä»¶è¯»å–ç±»åå’Œæ–¹æ³•åï¼‰ã€‚</li><li><strong>è·å–ç±»çš„ä¿¡æ¯</strong>ï¼Œæ¯”å¦‚æŸ¥çœ‹å®ƒçš„å±æ€§ã€æ–¹æ³•ç­‰ã€‚</li><li><strong>åˆ›å»ºå¯¹è±¡</strong>ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨ <code>new</code> å…³é”®å­—ã€‚</li></ol><p>è¿™æ—¶å€™ï¼Œåå°„å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><hr><h2 id="_2-åå°„çš„åŸºæœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-åå°„çš„åŸºæœ¬æ“ä½œ" aria-hidden="true">#</a> <strong>2. åå°„çš„åŸºæœ¬æ“ä½œ</strong></h2><h3 id="_2-1-è·å–-class-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_2-1-è·å–-class-å¯¹è±¡" aria-hidden="true">#</a> <strong>2.1 è·å– <code>Class</code> å¯¹è±¡</strong></h3><p>åœ¨ Java åå°„ä¸­ï¼Œ<strong>æ‰€æœ‰çš„ç±»ä¿¡æ¯éƒ½ç”± <code>Class</code> å¯¹è±¡è¡¨ç¤º</strong>ï¼Œè·å– <code>Class</code> å¯¹è±¡æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// æ–¹å¼ 1ï¼šé€šè¿‡ Class.forName(&quot;ç±»çš„å…¨é™å®šå&quot;)</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz1 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.Person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹å¼ 2ï¼šé€šè¿‡ ç±»å.class</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz2 <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹å¼ 3ï¼šé€šè¿‡ å¯¹è±¡.getClass()</span>
<span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz3 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ— è®ºå“ªç§æ–¹å¼ï¼Œ<code>clazz1</code>ã€<code>clazz2</code> å’Œ <code>clazz3</code> éƒ½æŒ‡å‘ <code>Person</code> ç±»çš„ <code>Class</code> å¯¹è±¡ã€‚</p><hr><h3 id="_2-2-é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_2-2-é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡" aria-hidden="true">#</a> <strong>2.2 é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</strong></h3><p>ä½¿ç”¨ <code>newInstance()</code> åˆ›å»ºå¯¹è±¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.Person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰ä»·äº new Person()</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_2-3-é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2-3-é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•" aria-hidden="true">#</a> <strong>2.3 é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•</strong></h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>javaå¤åˆ¶ç¼–è¾‘<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Java Reflection!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectionDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·å– Class å¯¹è±¡</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºå¯¹è±¡</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–æ–¹æ³•</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sayHello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è°ƒç”¨æ–¹æ³•</span>
        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºï¼šHello, Java Reflection!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼š</p><ol><li><code>clazz.getMethod(&quot;sayHello&quot;)</code> è·å– <code>sayHello()</code> æ–¹æ³•ã€‚</li><li><code>method.invoke(obj)</code> åœ¨ <code>obj</code> ä¸Šæ‰§è¡Œè¯¥æ–¹æ³•ã€‚</li></ol><hr><h3 id="_2-4-é€šè¿‡åå°„è®¿é—®å­—æ®µ-å±æ€§" tabindex="-1"><a class="header-anchor" href="#_2-4-é€šè¿‡åå°„è®¿é—®å­—æ®µ-å±æ€§" aria-hidden="true">#</a> <strong>2.4 é€šè¿‡åå°„è®¿é—®å­—æ®µï¼ˆå±æ€§ï¼‰</strong></h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>javaå¤åˆ¶ç¼–è¾‘<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectionDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å– private å­—æ®µ</span>
        <span class="token class-name">Field</span> field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…è®¸è®¿é—®ç§æœ‰å­—æ®µ</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¿®æ”¹å‰: &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John</span>

        <span class="token comment">// ä¿®æ”¹å­—æ®µçš„å€¼</span>
        field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¿®æ”¹å: &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Alice</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_3-åå°„çš„åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3-åå°„çš„åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> <strong>3. åå°„çš„åº”ç”¨åœºæ™¯</strong></h2><h3 id="_3-1-æ¡†æ¶çš„åº•å±‚å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-1-æ¡†æ¶çš„åº•å±‚å®ç°" aria-hidden="true">#</a> <strong>3.1 æ¡†æ¶çš„åº•å±‚å®ç°</strong></h3><p>Java çš„è®¸å¤šæ¡†æ¶ï¼ˆSpringã€Hibernate ç­‰ï¼‰éƒ½å¤§é‡ä½¿ç”¨äº†åå°„ï¼Œæ¯”å¦‚ï¼š</p><ul><li><p>Springæ¡†æ¶</p><p><strong>Spring IoC</strong>ï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼šåå°„åˆ›å»º Bean å¹¶è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼ˆ@Autowiredï¼‰ã€‚</p><p><strong>Spring AOP</strong>ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šåå°„æ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼ˆ@Transactionalã€@Logï¼‰ã€‚</p><p><strong>Spring MVC</strong>ï¼šåå°„è§£æ <code>@RequestMapping</code> ç»‘å®š URL å’Œæ–¹æ³•ã€‚</p></li><li><p><strong>JUnit</strong> é€šè¿‡åå°„æ‰§è¡Œæµ‹è¯•æ–¹æ³•ã€‚</p></li></ul><h4 id="ğŸ“Œ-ä¾‹å­-æ¨¡æ‹Ÿ-spring-çš„-autowired-è‡ªåŠ¨æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-ä¾‹å­-æ¨¡æ‹Ÿ-spring-çš„-autowired-è‡ªåŠ¨æ³¨å…¥" aria-hidden="true">#</a> <strong>ğŸ“Œ ä¾‹å­ï¼šæ¨¡æ‹Ÿ Spring çš„ @Autowired è‡ªåŠ¨æ³¨å…¥</strong></h4><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ï¼š</p><ol><li>è§£æç±»ä¸­çš„ <code>@Autowired</code> æ³¨è§£ã€‚</li><li>é€šè¿‡åå°„è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼Œè€Œä¸éœ€è¦ <code>new</code> å…³é”®å­—ã€‚</li><li>æ¨¡æ‹Ÿ Spring ä¾èµ–æ³¨å…¥çš„æœºåˆ¶ã€‚</li></ol><h4 id="_1ï¸âƒ£-åˆ›å»º-autowired-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-åˆ›å»º-autowired-æ³¨è§£" aria-hidden="true">#</a> <strong>1ï¸âƒ£ åˆ›å»º <code>@Autowired</code> æ³¨è§£</strong></h4><p>Spring ä¸­çš„ <code>@Autowired</code> ä¸»è¦ç”¨äºè‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ªç±»ä¼¼çš„æ³¨è§£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>

<span class="token comment">// ä½œç”¨äºå­—æ®µ</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">)</span>
<span class="token comment">// è¿è¡Œæ—¶ä¿ç•™</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Autowired</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ï¸âƒ£-å®šä¹‰ä¸šåŠ¡ç±»" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-å®šä¹‰ä¸šåŠ¡ç±»" aria-hidden="true">#</a> <strong>2ï¸âƒ£ å®šä¹‰ä¸šåŠ¡ç±»</strong></h4><p>æ¨¡æ‹Ÿä¸€ä¸ªåç«¯å¼€å‘ä¸­å¸¸è§çš„<strong>Service å’Œ DAO å±‚</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// æ•°æ®è®¿é—®å±‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello, Java Backend!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸šåŠ¡é€»è¾‘å±‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">// ä¾èµ–æ³¨å…¥</span>
    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userRepository<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>UserRepository</code> è´Ÿè´£è®¿é—®æ•°æ®åº“ï¼ˆè¿™é‡Œç®€åŒ–ï¼‰ã€‚</li><li><code>UserService</code> ä¾èµ– <code>UserRepository</code>ï¼Œä½†æ²¡æœ‰æ‰‹åŠ¨ <code>new</code>ï¼Œè€Œæ˜¯ç”¨ <code>@Autowired</code> æ ‡è®°ã€‚</li></ul><h4 id="_3ï¸âƒ£-é€šè¿‡åå°„å®ç°è‡ªåŠ¨ä¾èµ–æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#_3ï¸âƒ£-é€šè¿‡åå°„å®ç°è‡ªåŠ¨ä¾èµ–æ³¨å…¥" aria-hidden="true">#</a> <strong>3ï¸âƒ£ é€šè¿‡åå°„å®ç°è‡ªåŠ¨ä¾èµ–æ³¨å…¥</strong></h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IoCContainer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. åˆ›å»º UserService å®ä¾‹</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2. å¤„ç† @Autowired æ³¨è§£ï¼Œå®ç°è‡ªåŠ¨æ³¨å…¥</span>
        <span class="token function">injectDependencies</span><span class="token punctuation">(</span>userService<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3. è°ƒç”¨æ–¹æ³•ï¼ŒéªŒè¯ä¾èµ–æ˜¯å¦è¢«æ³¨å…¥</span>
        userService<span class="token punctuation">.</span><span class="token function">printUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º: Hello, Java Backend!</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// åå°„æ‰«æ @Autowired å­—æ®µï¼Œå¹¶è¿›è¡Œä¾èµ–æ³¨å…¥</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">injectDependencies</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–ç±»å¯¹è±¡ï¼Œè¿™é‡Œè·å–åˆ°çš„æ˜¯UserService</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// éå†æ‰€æœ‰å­—æ®µ</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Autowired</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœå­—æ®µæœ‰ @Autowired æ³¨è§£</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…è®¸è®¿é—®ç§æœ‰å­—æ®µ</span>
                <span class="token class-name">Object</span> dependency <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯UserRepository</span>
                field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> dependency<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨å…¥åˆ°å½“å‰å¯¹è±¡ä¸­</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ï¸âƒ£-è¿è¡Œæ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#_4ï¸âƒ£-è¿è¡Œæ•ˆæœ" aria-hidden="true">#</a> <strong>4ï¸âƒ£ è¿è¡Œæ•ˆæœ</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Hello, Java Backend<span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>âœ… <code>UserService</code> è‡ªåŠ¨æ³¨å…¥äº† <code>UserRepository</code>ï¼Œæ— éœ€æ‰‹åŠ¨ newï¼</strong></p><h4 id="ğŸ”-è§£æ-åå°„åšäº†ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ”-è§£æ-åå°„åšäº†ä»€ä¹ˆ" aria-hidden="true">#</a> <strong>ğŸ” è§£æï¼šåå°„åšäº†ä»€ä¹ˆï¼Ÿ</strong></h4><ol><li><strong>è·å–ç±»çš„æ‰€æœ‰å­—æ®µ</strong>ï¼š<code>clazz.getDeclaredFields()</code></li><li><strong>åˆ¤æ–­å­—æ®µæ˜¯å¦æœ‰ <code>@Autowired</code> æ³¨è§£</strong>ï¼š<code>field.isAnnotationPresent(Autowired.class)</code></li><li><strong>åˆ›å»ºä¾èµ–å¯¹è±¡</strong>ï¼ˆåå°„è°ƒç”¨æ„é€ æ–¹æ³•ï¼‰ï¼š<code>field.getType().getDeclaredConstructor().newInstance()</code></li><li><strong>è®¾ç½®å­—æ®µçš„å€¼</strong>ï¼ˆç»•è¿‡ private é™åˆ¶ï¼‰ï¼š<code>field.set(obj, dependency)</code></li></ol><p>è¿™å°±æ˜¯ <strong>Spring IoC ä¾èµ–æ³¨å…¥</strong> çš„æ ¸å¿ƒåŸç†ä¹‹ä¸€ï¼</p><h3 id="_3-2-è¯»å–é…ç½®æ–‡ä»¶åŠ¨æ€åˆ›å»ºå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_3-2-è¯»å–é…ç½®æ–‡ä»¶åŠ¨æ€åˆ›å»ºå¯¹è±¡" aria-hidden="true">#</a> <strong>3.2 è¯»å–é…ç½®æ–‡ä»¶åŠ¨æ€åˆ›å»ºå¯¹è±¡</strong></h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ª <code>config.properties</code>ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">className</span><span class="token punctuation">=</span><span class="token value attr-value">com.example.Person</span>
<span class="token key attr-name">methodName</span><span class="token punctuation">=</span><span class="token value attr-value">sayHello</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åé€šè¿‡åå°„åŠ¨æ€åŠ è½½ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectionConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">ReflectionConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;config.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        props<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–ç±»åå’Œæ–¹æ³•å</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;methodName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åå°„åˆ›å»ºå¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬<strong>ä¸éœ€è¦ä¿®æ”¹ä»£ç </strong>ï¼Œåªè¦æ”¹ <code>config.properties</code> å°±å¯ä»¥è°ƒç”¨ä¸åŒçš„ç±»å’Œæ–¹æ³•ã€‚</p>`,55),o=[p];function c(l,i){return s(),a("div",null,o)}const r=n(t,[["render",c],["__file","29.reflection.html.vue"]]);export{r as default};
